# Pydantic AI å­¦ä¹ æ¨¡å—

> å®Œæ•´è¯¦ç»†çš„ Pydantic AI å­¦ä¹ ç¬”è®°ï¼Œæ¶µç›–ä»åŸºç¡€åˆ°é«˜çº§çš„æ‰€æœ‰æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚

## ğŸ“š é¡¹ç›®æ¦‚è¿°

Pydantic AI æ˜¯ç”± Pydantic å›¢é˜Ÿå¼€å‘çš„ Python Agent æ¡†æ¶ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿã€è‡ªä¿¡ã€è½»æ¾åœ°æ„å»ºç”Ÿäº§çº§ GenAI åº”ç”¨å’Œå·¥ä½œæµã€‚æœ¬æ¨¡å—æä¾›äº†å®Œæ•´çš„ä¸­æ–‡å­¦ä¹ æ–‡æ¡£å’Œå®ç”¨ç¤ºä¾‹ä»£ç ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **ç±»å‹å®‰å…¨ä¼˜å…ˆ** - å®Œæ•´çš„ç±»å‹æç¤ºå’Œ IDE æ”¯æŒ
- ğŸ”Œ **æ¨¡å‹æ— å…³** - æ”¯æŒ 20+ æ¨¡å‹æä¾›å•†
- ğŸ“Š **æ— ç¼å¯è§‚æµ‹æ€§** - é›†æˆ Pydantic Logfire
- ğŸ› ï¸ **å¼ºå¤§çš„å·¥å…·ç³»ç»Ÿ** - ç®€å•çš„è£…é¥°å™¨æ³¨å†Œ
- ğŸ’‰ **ä¾èµ–æ³¨å…¥** - ç±»å‹å®‰å…¨çš„ä¸Šä¸‹æ–‡ä¼ é€’
- ğŸ“ **ç»“æ„åŒ–è¾“å‡º** - ä½¿ç”¨ Pydantic æ¨¡å‹éªŒè¯è¾“å‡º
- ğŸš€ **ç”Ÿäº§å°±ç»ª** - ä¸°å¯Œçš„é«˜çº§ç‰¹æ€§

## ğŸ“‚ ç›®å½•ç»“æ„

```
04_pydantic_ai/
â”œâ”€â”€ __init__.py                   # æ¨¡å—åˆå§‹åŒ–
â”œâ”€â”€ README.md                     # æœ¬æ–‡ä»¶
â”‚
â”œâ”€â”€ docs/                         # å®Œæ•´å­¦ä¹ æ–‡æ¡£ï¼ˆ16 ä¸ªæ–‡ä»¶ï¼Œ10 ä¸‡+ å­—ï¼‰
â”‚   â”œâ”€â”€ README.md                 # æ–‡æ¡£ç´¢å¼•å’Œå­¦ä¹ è·¯å¾„
â”‚   â”œâ”€â”€ 01_å¿«é€Ÿå¼€å§‹.md            # å®‰è£…ã€é…ç½®ã€ç¬¬ä¸€ä¸ª Agent
â”‚   â”œâ”€â”€ 02_æ ¸å¿ƒæ¦‚å¿µ.md            # Agentã€RunContextã€å·¥å…·ã€ä¾èµ–æ³¨å…¥
â”‚   â”œâ”€â”€ 03_Agentç³»ç»Ÿ.md           # Agent è¯¦ç»†é…ç½®å’Œé«˜çº§ç”¨æ³•
â”‚   â”œâ”€â”€ 04_å·¥å…·ç³»ç»Ÿ.md            # å·¥å…·å®šä¹‰ã€æ³¨å†Œã€ç®¡ç†
â”‚   â”œâ”€â”€ 05_ä¾èµ–æ³¨å…¥.md            # ä¾èµ–æ³¨å…¥æ·±åº¦è§£æ
â”‚   â”œâ”€â”€ 06_æ¨¡å‹æ”¯æŒ.md            # æ‰€æœ‰æ”¯æŒçš„æ¨¡å‹å’Œé…ç½®
â”‚   â”œâ”€â”€ 07_ç»“æ„åŒ–è¾“å‡º.md          # ä½¿ç”¨ Pydantic æ¨¡å‹å®šä¹‰è¾“å‡º
â”‚   â”œâ”€â”€ 08_æµå¼ä¼ è¾“.md            # æµå¼æ–‡æœ¬å’Œç»“æ„åŒ–è¾“å‡º
â”‚   â”œâ”€â”€ 09_å›¾å·¥ä½œæµ.md            # å¤æ‚å·¥ä½œæµ
â”‚   â”œâ”€â”€ 10_æŒä¹…åŒ–æ‰§è¡Œ.md          # é•¿ä»»åŠ¡ã€é‡è¯•ã€å®¹é”™
â”‚   â”œâ”€â”€ 11_äººæœºåä½œ.md            # å·¥å…·å®¡æ‰¹ã€HITL
â”‚   â”œâ”€â”€ 12_å¯è§‚æµ‹æ€§.md            # Logfire é›†æˆã€ç›‘æ§
â”‚   â”œâ”€â”€ 13_æµ‹è¯•å’Œè¯„ä¼°.md          # æµ‹è¯•ç­–ç•¥ã€æ€§èƒ½è¯„ä¼°
â”‚   â”œâ”€â”€ 14_æœ€ä½³å®è·µ.md            # ç”Ÿäº§ç¯å¢ƒæŒ‡å—
â”‚   â””â”€â”€ 15_å®æˆ˜æ¡ˆä¾‹.md            # å®Œæ•´åº”ç”¨æ¡ˆä¾‹
â”‚
â”œâ”€â”€ 01_basics/                    # åŸºç¡€å…¥é—¨ä»£ç ï¼ˆ2 ä¸ªç¤ºä¾‹ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ 01_hello_world.py         # æœ€ç®€å•çš„ Agent
â”‚   â””â”€â”€ 02_structured_output.py   # ç»“æ„åŒ–è¾“å‡º
â”‚
â”œâ”€â”€ 02_agents/                    # Agent ç³»ç»Ÿä»£ç ï¼ˆ1 ä¸ªç¤ºä¾‹ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ 01_conversation.py        # å¤šè½®å¯¹è¯
â”‚
â”œâ”€â”€ 03_tools/                     # å·¥å…·ç³»ç»Ÿä»£ç ï¼ˆ2 ä¸ªç¤ºä¾‹ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ 01_tools_example.py       # å·¥å…·ä½¿ç”¨
â”‚   â””â”€â”€ 02_dependency_injection.py # ä¾èµ–æ³¨å…¥
â”‚
â”œâ”€â”€ 04_models/                    # æ¨¡å‹é…ç½®ä»£ç ï¼ˆ1 ä¸ªç¤ºä¾‹ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ 01_model_selection.py     # æ¨¡å‹é€‰æ‹©å’Œé…ç½®
â”‚
â”œâ”€â”€ 05_advanced/                  # é«˜çº§ç‰¹æ€§ä»£ç ï¼ˆ2 ä¸ªç¤ºä¾‹ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ 01_streaming.py           # æµå¼ä¼ è¾“
â”‚   â””â”€â”€ 02_validation.py          # è¾“å‡ºéªŒè¯
â”œâ”€â”€ examples/                     # ç¤ºä¾‹ç´¢å¼•ï¼ˆä»£ç å·²ç§»è‡³å„æ¨¡å—ï¼‰
â”œâ”€â”€ tests/                        # æµ‹è¯•ä»£ç 
â””â”€â”€ notebooks/                    # Jupyter ç¬”è®°æœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
cd /path/to/python-playground

# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬ Pydantic AIï¼‰
uv sync
```

### 2. é…ç½® API å¯†é’¥

```bash
# è®¾ç½® OpenAI API å¯†é’¥
export OPENAI_API_KEY='sk-your-key-here'

# æˆ–ä½¿ç”¨ .env æ–‡ä»¶
echo "OPENAI_API_KEY=sk-your-key-here" >> .env
```

### 3. è¿è¡Œç¬¬ä¸€ä¸ªç¤ºä¾‹

```bash
# æœ€ç®€å•çš„ç¤ºä¾‹
uv run python 04_pydantic_ai/01_basics/01_hello_world.py

# ç»“æ„åŒ–è¾“å‡º
uv run python 04_pydantic_ai/01_basics/02_structured_output.py

# å·¥å…·ä½¿ç”¨
uv run python 04_pydantic_ai/03_tools/01_tools_example.py
```

## ğŸ“– å­¦ä¹ è·¯å¾„

### åˆå­¦è€…ï¼ˆ1-2 å¤©ï¼‰

1. ğŸ“„ é˜…è¯» [docs/01_å¿«é€Ÿå¼€å§‹.md](./docs/01_å¿«é€Ÿå¼€å§‹.md)
2. ğŸƒ è¿è¡Œ `01_basics/` ä¸­çš„ç¤ºä¾‹
3. ğŸ“„ å­¦ä¹  [docs/02_æ ¸å¿ƒæ¦‚å¿µ.md](./docs/02_æ ¸å¿ƒæ¦‚å¿µ.md)
4. ğŸƒ è¿è¡Œ `03_tools/01_tools_example.py`

### è¿›é˜¶ï¼ˆ3-5 å¤©ï¼‰

5. ğŸ“„ æ·±å…¥ [docs/03_Agentç³»ç»Ÿ.md](./docs/03_Agentç³»ç»Ÿ.md)
6. ğŸ“„ å­¦ä¹  [docs/04_å·¥å…·ç³»ç»Ÿ.md](./docs/04_å·¥å…·ç³»ç»Ÿ.md)
7. ğŸ“„ æŒæ¡ [docs/05_ä¾èµ–æ³¨å…¥.md](./docs/05_ä¾èµ–æ³¨å…¥.md)
8. ğŸƒ è¿è¡Œ `02_agents/01_conversation.py`

### é«˜çº§ï¼ˆ1 å‘¨ï¼‰

9. ğŸ“„ å­¦ä¹  [docs/07_ç»“æ„åŒ–è¾“å‡º.md](./docs/07_ç»“æ„åŒ–è¾“å‡º.md)
10. ğŸ“„ äº†è§£ [docs/08_æµå¼ä¼ è¾“.md](./docs/08_æµå¼ä¼ è¾“.md)
11. ğŸ“„ æŒæ¡ [docs/12_å¯è§‚æµ‹æ€§.md](./docs/12_å¯è§‚æµ‹æ€§.md)
12. ğŸ“„ åº”ç”¨ [docs/14_æœ€ä½³å®è·µ.md](./docs/14_æœ€ä½³å®è·µ.md)

### ç”Ÿäº§å°±ç»ªï¼ˆ2 å‘¨ï¼‰

13. ğŸ“„ å­¦ä¹  [docs/13_æµ‹è¯•å’Œè¯„ä¼°.md](./docs/13_æµ‹è¯•å’Œè¯„ä¼°.md)
14. ğŸ“„ å‚è€ƒ [docs/15_å®æˆ˜æ¡ˆä¾‹.md](./docs/15_å®æˆ˜æ¡ˆä¾‹.md)
15. ğŸ’» å¼€å§‹æ„å»ºç”Ÿäº§çº§åº”ç”¨

## ğŸ“š æ–‡æ¡£è¯¦è§£

å®Œæ•´æ–‡æ¡£åˆ—è¡¨ï¼ˆ15 ä¸ªæ ¸å¿ƒæ–‡æ¡£ + READMEï¼‰ï¼š

### åŸºç¡€ç¯‡
1. **[01_å¿«é€Ÿå¼€å§‹.md](./docs/01_å¿«é€Ÿå¼€å§‹.md)** - å®‰è£…ã€é…ç½®ã€ç¬¬ä¸€ä¸ª Agent
2. **[02_æ ¸å¿ƒæ¦‚å¿µ.md](./docs/02_æ ¸å¿ƒæ¦‚å¿µ.md)** - Agentã€RunContextã€å·¥å…·ã€ä¾èµ–æ³¨å…¥

### æ ¸å¿ƒåŠŸèƒ½ç¯‡
3. **[03_Agentç³»ç»Ÿ.md](./docs/03_Agentç³»ç»Ÿ.md)** - Agent åˆ›å»ºã€é…ç½®ã€è¿è¡Œæ–¹å¼
4. **[04_å·¥å…·ç³»ç»Ÿ.md](./docs/04_å·¥å…·ç³»ç»Ÿ.md)** - å·¥å…·å®šä¹‰ã€æ³¨å†Œã€ç®¡ç†
5. **[05_ä¾èµ–æ³¨å…¥.md](./docs/05_ä¾èµ–æ³¨å…¥.md)** - RunContextã€ä¾èµ–ç±»å‹ã€æµ‹è¯•
6. **[06_æ¨¡å‹æ”¯æŒ.md](./docs/06_æ¨¡å‹æ”¯æŒ.md)** - 20+ æ¨¡å‹æä¾›å•†ã€é…ç½®

### é«˜çº§ç‰¹æ€§ç¯‡
7. **[07_ç»“æ„åŒ–è¾“å‡º.md](./docs/07_ç»“æ„åŒ–è¾“å‡º.md)** - Pydantic æ¨¡å‹å®šä¹‰è¾“å‡º
8. **[08_æµå¼ä¼ è¾“.md](./docs/08_æµå¼ä¼ è¾“.md)** - æµå¼æ–‡æœ¬å’Œç»“æ„åŒ–è¾“å‡º
9. **[09_å›¾å·¥ä½œæµ.md](./docs/09_å›¾å·¥ä½œæµ.md)** - å¤æ‚å·¥ä½œæµ
10. **[10_æŒä¹…åŒ–æ‰§è¡Œ.md](./docs/10_æŒä¹…åŒ–æ‰§è¡Œ.md)** - é•¿ä»»åŠ¡ã€é‡è¯•ã€å®¹é”™
11. **[11_äººæœºåä½œ.md](./docs/11_äººæœºåä½œ.md)** - å·¥å…·å®¡æ‰¹ã€HITL

### å®è·µç¯‡
12. **[12_å¯è§‚æµ‹æ€§.md](./docs/12_å¯è§‚æµ‹æ€§.md)** - Logfire é›†æˆã€ç›‘æ§
13. **[13_æµ‹è¯•å’Œè¯„ä¼°.md](./docs/13_æµ‹è¯•å’Œè¯„ä¼°.md)** - æµ‹è¯•ç­–ç•¥ã€æ€§èƒ½è¯„ä¼°
14. **[14_æœ€ä½³å®è·µ.md](./docs/14_æœ€ä½³å®è·µ.md)** - æ¶æ„è®¾è®¡ã€æˆæœ¬ä¼˜åŒ–ã€å®‰å…¨æ€§
15. **[15_å®æˆ˜æ¡ˆä¾‹.md](./docs/15_å®æˆ˜æ¡ˆä¾‹.md)** - å®Œæ•´åº”ç”¨æ¡ˆä¾‹

## ğŸ’¡ ç¤ºä¾‹ä»£ç è¯¦è§£

### 01_basics/ - åŸºç¡€ç¤ºä¾‹
- **01_hello_world.py** - æœ€ç®€å•çš„ Pydantic AI ç¤ºä¾‹
- **02_structured_output.py** - ä½¿ç”¨ Pydantic æ¨¡å‹å®šä¹‰è¾“å‡º

### 02_agents/ - Agent ç³»ç»Ÿç¤ºä¾‹
- **01_conversation.py** - å¤šè½®å¯¹è¯åº”ç”¨

### 03_tools/ - å·¥å…·ç³»ç»Ÿç¤ºä¾‹
- **01_tools_example.py** - ç»™ Agent æ·»åŠ å·¥å…·å‡½æ•°
- **02_dependency_injection.py** - ä½¿ç”¨ä¾èµ–æ³¨å…¥ä¼ é€’ä¸Šä¸‹æ–‡

### 04_models/ - æ¨¡å‹é…ç½®ç¤ºä¾‹
- **01_model_selection.py** - ä¸åŒæ¨¡å‹çš„é€‰æ‹©å’Œé…ç½®

### 05_advanced/ - é«˜çº§ç‰¹æ€§ç¤ºä¾‹
- **01_streaming.py** - æµå¼ä¼ è¾“å®ç°
- **02_validation.py** - è¾“å‡ºéªŒè¯å’Œé‡è¯•æœºåˆ¶

æ¯ä¸ªç›®å½•éƒ½æœ‰ README.md è¯´æ˜ï¼ŒæŸ¥çœ‹å„æ¨¡å—äº†è§£è¯¦æƒ…ã€‚

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥

| æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| Agent | ä¸ LLM äº¤äº’çš„ä¸»è¦æ¥å£ | `Agent('openai:gpt-4')` |
| RunContext | ä¾èµ–æ³¨å…¥çš„ä¸Šä¸‹æ–‡ | `ctx.deps.database` |
| Tool | LLM å¯è°ƒç”¨çš„å‡½æ•° | `@agent.tool` |
| Dependencies | è¿è¡Œæ—¶ä¼ é€’çš„ä¾èµ– | `deps=MyDeps()` |
| Output Type | ç»“æ„åŒ–è¾“å‡ºç±»å‹ | `output_type=MyModel` |
| Message History | å¯¹è¯å†å² | `message_history=result.new_messages()` |

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
uv sync

# è¿è¡ŒåŸºç¡€ç¤ºä¾‹
uv run python 04_pydantic_ai/01_basics/01_hello_world.py
uv run python 04_pydantic_ai/01_basics/02_structured_output.py

# è¿è¡Œå·¥å…·ç¤ºä¾‹
uv run python 04_pydantic_ai/03_tools/01_tools_example.py
uv run python 04_pydantic_ai/03_tools/02_dependency_injection.py

# è¿è¡Œå¯¹è¯ç¤ºä¾‹
uv run python 04_pydantic_ai/02_agents/01_conversation.py

# è¿è¡Œæ¨¡å‹é…ç½®ç¤ºä¾‹
uv run python 04_pydantic_ai/04_models/01_model_selection.py

# è¿è¡Œé«˜çº§ç‰¹æ€§ç¤ºä¾‹
uv run python 04_pydantic_ai/05_advanced/01_streaming.py
uv run python 04_pydantic_ai/05_advanced/02_validation.py

# è¿è¡Œæµ‹è¯•
uv run pytest 04_pydantic_ai/tests/

# ä»£ç æ£€æŸ¥
uv run ruff check 04_pydantic_ai/

# å¯åŠ¨ Jupyter
uv run jupyter lab
```

## ğŸ“¦ ä¾èµ–åŒ…

æ ¸å¿ƒä¾èµ–ï¼š
- `pydantic-ai` - Pydantic AI æ ¸å¿ƒæ¡†æ¶
- `pydantic` - æ•°æ®éªŒè¯
- `httpx` - HTTP å®¢æˆ·ç«¯

å¯é€‰ä¾èµ–ï¼š
- `pydantic-ai-slim[openai]` - OpenAI æ”¯æŒ
- `pydantic-ai-slim[anthropic]` - Anthropic æ”¯æŒ
- `pydantic-ai-slim[google]` - Google Gemini æ”¯æŒ

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹èµ„æº
- [å®˜æ–¹æ–‡æ¡£](https://ai.pydantic.dev/)
- [GitHub ä»“åº“](https://github.com/pydantic/pydantic-ai)
- [Pydantic Logfire](https://docs.pydantic.dev/logfire/)
- [å®˜æ–¹ç¤ºä¾‹](https://github.com/pydantic/pydantic-ai/tree/main/examples)

### å­¦ä¹ èµ„æº
- [Pydantic æ–‡æ¡£](https://docs.pydantic.dev/)
- [OpenAI API æ–‡æ¡£](https://platform.openai.com/docs)
- [Anthropic API æ–‡æ¡£](https://docs.anthropic.com/)

## ğŸ’ª å®æˆ˜å»ºè®®

1. **ä»ç®€å•å¼€å§‹** - å…ˆè¿è¡Œ hello_world ç¤ºä¾‹
2. **ç†è§£æ ¸å¿ƒæ¦‚å¿µ** - Agentã€Toolã€RunContext
3. **åŠ¨æ‰‹å®è·µ** - ä¿®æ”¹ç¤ºä¾‹ä»£ç è¿›è¡Œå®éªŒ
4. **é˜…è¯»æ–‡æ¡£** - æ·±å…¥å­¦ä¹ æ¯ä¸ªä¸»é¢˜
5. **æ„å»ºé¡¹ç›®** - åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­

## ğŸ› å¸¸è§é—®é¢˜

### API å¯†é’¥æœªè®¾ç½®
```bash
export OPENAI_API_KEY='sk-your-key'
```

### å¯¼å…¥é”™è¯¯
```bash
uv sync  # é‡æ–°å®‰è£…ä¾èµ–
```

### ç±»å‹æ£€æŸ¥é”™è¯¯
ç¡®ä¿ä½¿ç”¨å®Œæ•´çš„ç±»å‹æ³¨è§£ï¼š
```python
agent: Agent[MyDeps, MyOutput] = Agent(...)
```

## ğŸ“ ä¸‹ä¸€æ­¥

å®Œæˆæœ¬æ¨¡å—å­¦ä¹ åï¼Œä½ å¯ä»¥ï¼š

1. âœ… ä½¿ç”¨ Pydantic AI æ„å»ºç”Ÿäº§çº§ Agent åº”ç”¨
2. âœ… é›†æˆå¤šç§ LLM æ¨¡å‹æä¾›å•†
3. âœ… å®ç°å¤æ‚çš„å·¥å…·ç³»ç»Ÿ
4. âœ… åº”ç”¨æœ€ä½³å®è·µå’Œè®¾è®¡æ¨¡å¼
5. âœ… ç›‘æ§å’Œä¼˜åŒ– Agent æ€§èƒ½

å¼€å§‹ä½ çš„ Pydantic AI ä¹‹æ—…å§ï¼ğŸš€
